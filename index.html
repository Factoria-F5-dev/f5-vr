<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
    <script>
      AFRAME.registerComponent("timer", {
        init: function () {
          this.seconds = 0;
          this.timerText = this.el.querySelector("[text]");

          // Iniciar el timer cuando la escena estÃ© lista
          this.el.sceneEl.addEventListener("loaded", () => {
            this.timerInterval = setInterval(() => {
              this.seconds++;
              this.timerText.setAttribute("value", `Tiempo: ${this.seconds}s`);
            }, 1000);
          });
        },
        remove: function () {
          if (this.timerInterval) {
            clearInterval(this.timerInterval);
          }
        },
      });

      AFRAME.registerComponent("reset-button", {
        init: function () {
          this.el.addEventListener("click", () => {
            window.location.reload();
          });
        },
      });
    </script>
    <script src="script.js"></script>
  </head>
  <body>
    <a-scene physics="gravity: -9">
      <!-- Assets section for loading textures -->
      <a-assets>
        <img id="logo" src="logo.png" crossorigin="anonymous" />
      </a-assets>

      <!-- Timer Display -->
      <a-entity position="8 5 -5" rotation="0 0 0" timer>
        <a-text
          value="Tiempo: 0s"
          align="center"
          color="#FFFFFF"
          scale="1 1 1"
        ></a-text>
      </a-entity>

      <!-- Reset Button -->
      <a-plane
        position="8 5 -5"
        rotation="0 0 0"
        width="1"
        height="0.5"
        color="#FF0000"
        reset-button
        static-body
        class="clickable"
      >
        <!--a-text
          value="Reiniciar"
          align="center"
          position="0 0 0.01"
          color="#FFFFFF"
          scale="1 1 1"
        ></a-text-->
      </a-plane>

      <a-box
        position="-1 0.5 -3"
        rotation="0 45 0"
        color="#FFF"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
        material="src: #logo; repeat: 1 1"
      ></a-box>
      <a-box
        position="-3 6 -8"
        rotation="0 45 0"
        color="#FFF"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
        material="src: #logo; repeat: 1 1"
      ></a-box>
      <a-box
        position="-1 2 -6"
        rotation="0 45 0"
        color="#FFF"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
        material="src: #logo; repeat: 1 1"
      ></a-box>
      <a-box
        position="-3 10 -5"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <!-- 20 cubos generados aleatoriamente -->
      <a-box
        position="2 1 -5"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-4 2 -7"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="1 3 -6"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-2 4 -4"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="3 5 -9"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-5 6 -8"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="4 7 -3"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="0 8 -6"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-3 9 -7"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="5 10 -5"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-1 11 -6"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="2 12 -4"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="0 13 -8"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-4 14 -5"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="1 15 -6"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-2 16 -9"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="3 17 -3"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-5 18 -4"
        rotation="0 45 0"
        color="#FFF"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
        material="src: #logo; repeat: 1 1"
      ></a-box>
      <a-box
        position="4 19 -7"
        rotation="0 45 0"
        color="#FF4700"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-box>
      <a-box
        position="-3 20 -5"
        rotation="0 45 0"
        color="#FFF"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
        material="src: #logo; repeat: 1 1"
      ></a-box>

      <a-sphere
        position="0 10 -8"
        radius="1.25"
        color="#2D63E0"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-sphere>
      <a-cylinder
        position="1 2 -3"
        radius="0.5"
        height="1.5"
        color="#2D63E0"
        dynamic-body="shape: box; mass: 1"
        class="collidable"
      ></a-cylinder>

      <a-box
        position="0 0 0"
        depth="100"
        width="100"
        height="0.1"
        static-body="shape: box; mass: 1"
        visible="false"
      ></a-box>

      <a-entity environment="preset: goldmine"></a-entity>

      <a-entity id="cameraRig">
        <a-entity camera position="0 1.7 3">
          <a-text
            value="Apila los cubos F5 y desaparece los otros"
            position="-1.5 2 -5"
          ></a-text>
        </a-entity>
        <a-entity
          thumbstick-logging
          collider-check
          raycaster="objects: .collidable, .clickable; showLine: true"
          laser-controls="hand: left"
        ></a-entity>
        <a-entity
          thumbstick-logging
          collider-check
          raycaster="objects: .collidable, .clickable; showLine: true"
          laser-controls="hand: right"
        ></a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
